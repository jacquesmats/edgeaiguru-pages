<!DOCTYPE html>

<html>

  <head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Localizando dados em um Dataframe usando Pandas LOC e ILOC - Clean Blog
    
  </title>

  <meta name="description" content="Há muitas maneiras de extrair os elementos, linhas e colunas de um DataFrame. Alguns métodos de indexação são muito semelhantes, mas se comportam de maneira ...">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/startbootstrap-clean-blog-jekyll/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/startbootstrap-clean-blog-jekyll/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/startbootstrap-clean-blog-jekyll/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/startbootstrap-clean-blog-jekyll/2019/02/03/Pandas-Indexing.html">
  <link rel="alternate" type="application/rss+xml" title="Clean Blog" href="/startbootstrap-clean-blog-jekyll/feed.xml">

</head>


  <body>

    <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/startbootstrap-clean-blog-jekyll/">Clean Blog</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/startbootstrap-clean-blog-jekyll/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/startbootstrap-clean-blog-jekyll/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/startbootstrap-clean-blog-jekyll/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/startbootstrap-clean-blog-jekyll/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


    <!-- Page Header -->

  <header class="masthead">
    
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Localizando dados em um Dataframe usando Pandas LOC e ILOC</h1>
            
            <span class="meta">Posted by
              <a href="#">Start Bootstrap</a>
              on February 03, 2019 &middot; <span class="reading-time" title="Estimated read time">
  
   12 mins  read </span>
</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <p>Há muitas maneiras de extrair os elementos, linhas e colunas de um DataFrame. Alguns métodos de indexação são muito semelhantes, mas se comportam de maneira muito diferente. O objetivo deste post é identificar uma estratégia única para extrair dados de um DataFrame que seja simples de interpretar e produza resultados confiáveis.</p>

<p>No caso de você querer pular para o final, aqui está o resumo:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. use .loc [] para rótulos
2. use .iloc [] para posições
3. designe explicitamente as linhas e colunas, mesmo que seja com ':'
</code></pre></div></div>

<p>Para começar, criamos um pequeno dataset usando dados da Wikipedia sobre as montanhas mais altas do mundo. Para cada montanha, temos seu nome, altura em metros, ano em que foi a primeira ascensão e a cordilheira a qual ela pertence. Se esta é sua primeira exposição a um DataFrame do pandas, cada montanha e suas informações associadas são uma linha, e cada informação, por exemplo, nome ou altitude, é uma coluna.</p>

<pre bgcolor="#FF0000">
import pandas as pd

#Cria um pequeno dataset
data = {'Nome':['Mount Everest', 'K2', 'Kangchenjunga', 'Lhotse'], 'Altitude':[8848,8611,8586,8616],'Primeira ascensão':[1953,1954,1955,1956],'Cordilheira':['Himalaia', 'Karakoram', 'Himalaia', 'Himalaia']}
df = pd.DataFrame(data)
display(df)
</pre>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Nome</th>
      <th>Altitude</th>
      <th>Primeira ascensão</th>
      <th>Cordilheira</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Mount Everest</td>
      <td>8848</td>
      <td>1953</td>
      <td>Himalaia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>K2</td>
      <td>8611</td>
      <td>1954</td>
      <td>Karakoram</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Kangchenjunga</td>
      <td>8586</td>
      <td>1955</td>
      <td>Himalaia</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Lhotse</td>
      <td>8616</td>
      <td>1956</td>
      <td>Himalaia</td>
    </tr>
  </tbody>
</table>
</div>

<p>Cada coluna tem um nome associado a ela, também conhecido como um rótulo. Os rótulos das nossas colunas são ‘Nome’, ‘Altitude (m)’, ‘Primeira ascensão’ e ‘Cordilheira’. Em um Dataframe do Pandas, cada linha também tem um nome. Por padrão, esse rótulo é apenas o número da linha. No entanto, você pode definir uma das suas colunas como o índice do seu DataFrame, o que significa que seus valores serão usados como rótulos de linha. Nós definimos a coluna ‘Nome’ como nosso índice. <br />
Vale notar a utilização do parametro <code class="highlighter-rouge">inplace = True</code>, que não vai criar uma cópia do Dataframe, mas vai fazer a modificação diretamente no original.</p>

<pre>
df.set_index('Nome', inplace=True)
</pre>
<blockquote>

</blockquote>

<h2 id="pandasdataframeloc">pandas.DataFrame.loc</h2>

<p>É uma operação comum escolher uma das colunas do DataFrame para trabalhar. Para selecionar uma coluna por seu rótulo, usamos a função <code class="highlighter-rouge">.loc []</code>. Uma coisa que podemos fazer que torna nossos comandos fáceis de interpretar é sempre incluir tanto o índice da linha quanto o índice da coluna em que estamos interessados. Neste caso, estamos interessados em todas as linhas. Para mostrar isso, usamos dois pontos (:). Então, para indicar a coluna em que estamos interessados, adicionamos seu rótulo. O comando <code class="highlighter-rouge">df.loc [:, 'Primeira ascensão']</code> nos leva apenas a coluna ‘Primeira ascensão’.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s">'Primeira ascensão'</span><span class="p">]</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Nome
Mount Everest    1953
K2               1954
Kangchenjunga    1955
Lhotse           1956
Name: Primeira ascensão, dtype: int64
</code></pre></div></div>

<p>Vale a pena notar que este comando retorna uma série, a estrutura de dados que os pandas usam para representar uma coluna. Se, em vez de uma série, apenas quiséssemos uma matriz dos números que estão na coluna ‘Primeira ascensão’, então adicionamos ‘.values’ ao final do nosso comando. Isso retorna um array numpy contendo [1953, 1954, 1955 e 1956].</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s">'Primeira ascensão'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([1953, 1954, 1955, 1956])
</code></pre></div></div>

<p>Se quisermos apenas obter uma única linha, usamos novamente a função <code class="highlighter-rouge">.loc[]</code>, dessa vez especificando um rótulo de linha e colocando dois pontos na posição da coluna.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">'K2'</span><span class="p">,:]</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Altitude                  8611
Primeira ascensão         1954
Cordilheira          Karakoram
Name: K2, dtype: object
</code></pre></div></div>

<p>Se quisermos apenas um único valor, por exemplo, o ano em que o K2 foi finalizado, podemos especificar os rótulos para a linha e a coluna. A linha sempre vem em primeiro lugar.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">'K2'</span><span class="p">,</span><span class="s">'Primeira ascensão'</span><span class="p">]</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1954
</code></pre></div></div>

<p>Embora você possa usar apenas um argumento na função <code class="highlighter-rouge">.loc[]</code>, é mais simples interpretar se você sempre especificar a linha e a coluna, mesmo que seja com dois-pontos. <br />
Não precisamos nos limitar a uma única linha ou coluna usando esse método. Aqui, na posição de linha, passamos uma lista de rótulos. Isso retorna um conjunto de linhas, em vez de apenas um.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s">'K2'</span><span class="p">,</span><span class="s">'Lhotse'</span><span class="p">],:]</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Altitude</th>
      <th>Primeira ascensão</th>
      <th>Cordilheira</th>
    </tr>
    <tr>
      <th>Nome</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>K2</th>
      <td>8611</td>
      <td>1954</td>
      <td>Karakoram</td>
    </tr>
    <tr>
      <th>Lhotse</th>
      <td>8616</td>
      <td>1956</td>
      <td>Himalaia</td>
    </tr>
  </tbody>
</table>
</div>

<p>Também podemos obter um subconjunto das colunas, especificando as colunas inicial e final e colocando um ‘:’ entre elas. <br /> Neste caso, <code class="highlighter-rouge">'Altitude':'Primeira ascensão'</code> nos dará todas as colunas entre elas. Observe que isso é diferente da indexação numérica em numpy, em que a última coluna é omitida. Além disso, como já especificamos a coluna de nome como o índice, ela também será retornada no dataframe que receberemos de volta.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s">'Altitude'</span><span class="p">:</span><span class="s">'Primeira ascensão'</span><span class="p">]</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Altitude</th>
      <th>Primeira ascensão</th>
    </tr>
    <tr>
      <th>Nome</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Mount Everest</th>
      <td>8848</td>
      <td>1953</td>
    </tr>
    <tr>
      <th>K2</th>
      <td>8611</td>
      <td>1954</td>
    </tr>
    <tr>
      <th>Kangchenjunga</th>
      <td>8586</td>
      <td>1955</td>
    </tr>
    <tr>
      <th>Lhotse</th>
      <td>8616</td>
      <td>1956</td>
    </tr>
  </tbody>
</table>
</div>

<p>Além disso, podemos selecionar linhas ou colunas onde o valor atende a uma determinada condição. Neste caso, queremos encontrar as linhas onde os valores da coluna ‘Primeira ascensão’ são maiores que 1954. Na posição das linhas, podemos colocar qualquer expressão booleana que tenha o mesmo número de valores que nós temos linhas. Nós poderíamos fazer o mesmo para colunas, se quiséssemos.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s">'Primeira ascensão'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1954</span><span class="p">,:]</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Altitude</th>
      <th>Primeira ascensão</th>
      <th>Cordilheira</th>
    </tr>
    <tr>
      <th>Nome</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Kangchenjunga</th>
      <td>8586</td>
      <td>1955</td>
      <td>Himalaia</td>
    </tr>
    <tr>
      <th>Lhotse</th>
      <td>8616</td>
      <td>1956</td>
      <td>Himalaia</td>
    </tr>
  </tbody>
</table>
</div>

<h2 id="pandasdataframeiloc">pandas.DataFrame.iloc</h2>

<p>Como alternativa à seleção de linhas e colunas por seus rótulos, também podemos selecioná-los por seus números de linha e coluna. A ordenação das colunas e, portanto, suas posições, depende de como o dataframe é inicializado. A coluna do índice, nossa coluna “nome”, não é contada. <br />
Para selecionar dados por sua posição, usamos a função <code class="highlighter-rouge">.iloc[]</code>. Novamente, o primeiro argumento é para as linhas, e o segundo argumento é para as colunas. Para selecionar todas as colunas na linha zero, escrevemos <code class="highlighter-rouge">.iloc[0,;]</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span> <span class="c1"># Mount Everest
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Altitude                 8848
Primeira ascensão        1953
Cordilheira          Himalaia
Name: Mount Everest, dtype: object
</code></pre></div></div>

<p>Da mesma forma, podemos selecionar uma coluna por posição, colocando o número da coluna que queremos na posição da coluna da função .iloc [].</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># Cordilheira
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Nome
Mount Everest     Himalaia
K2               Karakoram
Kangchenjunga     Himalaia
Lhotse            Himalaia
Name: Cordilheira, dtype: object
</code></pre></div></div>

<p>Podemos extrair um único valor, especificando a posição da linha e da coluna.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># Mount Everest,Cordilheira
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'Himalaia'
</code></pre></div></div>

<p>Podemos passar uma lista de posições se quisermos selecionar determinadas linhas e / ou determinadas colunas.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],:]</span> 
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Altitude</th>
      <th>Primeira ascensão</th>
      <th>Cordilheira</th>
    </tr>
    <tr>
      <th>Nome</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>K2</th>
      <td>8611</td>
      <td>1954</td>
      <td>Karakoram</td>
    </tr>
    <tr>
      <th>Lhotse</th>
      <td>8616</td>
      <td>1956</td>
      <td>Himalaia</td>
    </tr>
  </tbody>
</table>
</div>

<p>Também podemos usar o operador de intervalo de dois pontos para obter um conjunto de linhas ou colunas por posição. Observe que, diferentemente da função <code class="highlighter-rouge">.loc[]</code> usando rótulos, a função <code class="highlighter-rouge">.iloc[]</code> usando posições não inclui o nó de extremidade, ou seja, a última coluna/linha. Nesse caso, ele retorna apenas as colunas zero e um e não retorna a coluna dois.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> 
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Altitude</th>
      <th>Primeira ascensão</th>
    </tr>
    <tr>
      <th>Nome</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Mount Everest</th>
      <td>8848</td>
      <td>1953</td>
    </tr>
    <tr>
      <th>K2</th>
      <td>8611</td>
      <td>1954</td>
    </tr>
    <tr>
      <th>Kangchenjunga</th>
      <td>8586</td>
      <td>1955</td>
    </tr>
    <tr>
      <th>Lhotse</th>
      <td>8616</td>
      <td>1956</td>
    </tr>
  </tbody>
</table>
</div>

<p>Tudo isso pode ser resumido da seguinte maneira:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. use .loc [] para rótulos
2. use .iloc [] para posições
3. designe explicitamente as linhas e colunas, mesmo que seja com ':'
</code></pre></div></div>

<p>Eu sempre tive dificuldade para entender qual comando usar, e tive que parar e estudar com exemplos para realmente saber qual método utilizar. Esse tutorial é uma tentiva de fornecer um atalho para quem se encontra na mesma posição que eu estava e espero que ele tenha te ajudado de alguma forma.</p>


        <hr>

        <div class="clearfix">

          
          <a class="btn btn-primary float-left" href="/startbootstrap-clean-blog-jekyll/2017/10/31/man-must-explore.html"
            data-toggle="tooltip" data-placement="top" title="Man must explore, and this is exploration at its greatest">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          

        </div>

      </div>
    </div>
  </div>

    <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="https://www.twitter.com/SBootstrap">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://www.facebook.com/StartBootstrap">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/BlackrockDigital">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Start Bootstrap 2019</p>
      </div>
    </div>
  </div>
</footer>


    <script src="/startbootstrap-clean-blog-jekyll/assets/vendor/jquery/jquery.min.js"></script>
<script src="/startbootstrap-clean-blog-jekyll/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/startbootstrap-clean-blog-jekyll/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/startbootstrap-clean-blog-jekyll/assets/scripts.js"></script>




  </body>

</html>
